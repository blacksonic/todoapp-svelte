var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}function l(t,e,n){t.$$.on_destroy.push(s(e,n))}function u(t,e){t.appendChild(e)}function i(t,e,n){t.insertBefore(e,n||null)}function a(t){t.parentNode.removeChild(t)}function d(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function f(t){return document.createElement(t)}function p(t){return document.createTextNode(t)}function m(){return p(" ")}function h(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function g(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function $(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function y(t,e,n){t.classList[n?"add":"remove"](e)}let b;function v(t){b=t}function k(){if(!b)throw new Error("Function called outside component initialization");return b}function E(){const t=k();return(e,n)=>{const o=t.$$.callbacks[e];if(o){const r=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);o.slice().forEach((e=>{e.call(t,r)}))}}}function w(t){return k().$$.context.get(t)}const x=[],_=[],C=[],T=[],A=Promise.resolve();let L=!1;function O(t){C.push(t)}let S=!1;const R=new Set;function V(){if(!S){S=!0;do{for(let t=0;t<x.length;t+=1){const e=x[t];v(e),D(e.$$)}for(v(null),x.length=0;_.length;)_.pop()();for(let t=0;t<C.length;t+=1){const e=C[t];R.has(e)||(R.add(e),e())}C.length=0}while(x.length);for(;T.length;)T.pop()();L=!1,S=!1,R.clear()}}function D(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(O)}}const M=new Set;let N;function P(){N={r:0,c:[],p:N}}function j(){N.r||o(N.c),N=N.p}function I(t,e){t&&t.i&&(M.delete(t),t.i(e))}function U(t,e,n,o){if(t&&t.o){if(M.has(t))return;M.add(t),N.c.push((()=>{M.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function q(t){t&&t.c()}function B(t,n,c){const{fragment:s,on_mount:l,on_destroy:u,after_update:i}=t.$$;s&&s.m(n,c),O((()=>{const n=l.map(e).filter(r);u?u.push(...n):o(n),t.$$.on_mount=[]})),i.forEach(O)}function F(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function J(t,e){-1===t.$$.dirty[0]&&(x.push(t),L||(L=!0,A.then(V)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function z(e,r,c,s,l,u,i=[-1]){const d=b;v(e);const f=r.props||{},p=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:n(),dirty:i,skip_bound:!1};let m=!1;if(p.ctx=c?c(e,f,((t,n,...o)=>{const r=o.length?o[0]:n;return p.ctx&&l(p.ctx[t],p.ctx[t]=r)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](r),m&&J(e,t)),n})):[],p.update(),m=!0,o(p.before_update),p.fragment=!!s&&s(p.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);p.fragment&&p.fragment.l(t),t.forEach(a)}else p.fragment&&p.fragment.c();r.intro&&I(e.$$.fragment),B(e,r.target,r.anchor),V()}v(d)}class H{$destroy(){F(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const W="LOAD",G="CREATE",K="REMOVE",Q="UPDATE_TODO",X="COMPLETE_ALL",Y="CLEAR_COMPLETED",Z="SELECT_FILTER";function tt(e){let n,r,c,s,l,d;return{c(){n=f("header"),r=f("h1"),r.textContent="todos",c=m(),s=f("input"),g(s,"class","new-todo"),g(s,"placeholder","What needs to be done?"),s.value=e[0],g(s,"data-testid","todo-create"),g(n,"class","header")},m(t,o){i(t,n,o),u(n,r),u(n,c),u(n,s),l||(d=[h(s,"input",e[1]),h(s,"keyup",e[2])],l=!0)},p(t,[e]){1&e&&s.value!==t[0]&&(s.value=t[0])},i:t,o:t,d(t){t&&a(n),l=!1,o(d)}}}function et(t,e,n){const o=w("store");let r="";return[r,t=>n(0,r=t.target.value),t=>{"Enter"===t.key&&(o.dispatch((t=>({type:G,name:t}))(r)),n(0,r=""))}]}class nt extends H{constructor(t){super(),z(this,t,et,tt,c,{})}}function ot(e){let n,r,c,s,l,d,b,v,k,E,w,x,_,C=e[0].name+"";return{c(){n=f("li"),r=f("div"),c=f("input"),l=m(),d=f("label"),b=p(C),v=m(),k=f("button"),E=m(),w=f("input"),g(c,"class","toggle"),g(c,"type","checkbox"),c.checked=s=e[0].completed,g(d,"data-testid","todo-name"),g(k,"class","destroy"),g(k,"data-testid","todo-remove"),g(r,"class","view"),g(w,"class","edit"),w.value=e[2],g(n,"data-testid","todo-item"),y(n,"editing",e[1]),y(n,"completed",e[0].completed)},m(t,o){i(t,n,o),u(n,r),u(r,c),u(r,l),u(r,d),u(d,b),u(r,v),u(r,k),u(n,E),u(n,w),x||(_=[h(c,"change",e[4]),h(d,"dblclick",e[3]),h(k,"click",e[5]),h(w,"input",e[6]),h(w,"blur",e[7])],x=!0)},p(t,[e]){1&e&&s!==(s=t[0].completed)&&(c.checked=s),1&e&&C!==(C=t[0].name+"")&&$(b,C),4&e&&w.value!==t[2]&&(w.value=t[2]),2&e&&y(n,"editing",t[1]),1&e&&y(n,"completed",t[0].completed)},i:t,o:t,d(t){t&&a(n),x=!1,o(_)}}}function rt(t,e,n){const o=E();let{todo:r}=e,c=!1,{name:s}=r;return t.$$set=t=>{"todo"in t&&n(0,r=t.todo)},[r,c,s,()=>n(1,c=!0),()=>{o("update",{id:r.id,completed:!r.completed})},()=>o("remove",r.id),t=>n(2,s=t.target.value),()=>{o("update",{id:r.id,name:s}),n(1,c=!1)}]}class ct extends H{constructor(t){super(),z(this,t,rt,ot,c,{todo:0})}}function st(t,e,n){const o=t.slice();return o[8]=e[n],o}function lt(t){let e,n;return e=new ct({props:{todo:t[8]}}),e.$on("remove",t[3]),e.$on("update",t[4]),{c(){q(e.$$.fragment)},m(t,o){B(e,t,o),n=!0},p(t,n){const o={};2&n&&(o.todo=t[8]),e.$set(o)},i(t){n||(I(e.$$.fragment,t),n=!0)},o(t){U(e.$$.fragment,t),n=!1},d(t){F(e,t)}}}function ut(t){let e,n,o,r,c,s,l,p,$,y=t[1],b=[];for(let e=0;e<y.length;e+=1)b[e]=lt(st(t,y,e));const v=t=>U(b[t],1,1,(()=>{b[t]=null}));return{c(){e=f("section"),n=f("input"),o=m(),r=f("label"),c=m(),s=f("ul");for(let t=0;t<b.length;t+=1)b[t].c();g(n,"id","toggle-all"),g(n,"class","toggle-all"),g(n,"type","checkbox"),n.checked=t[0],n.readOnly=!0,g(r,"for","toggle-all"),g(s,"class","todo-list"),g(e,"class","main")},m(a,d){i(a,e,d),u(e,n),u(e,o),u(e,r),u(e,c),u(e,s);for(let t=0;t<b.length;t+=1)b[t].m(s,null);l=!0,p||($=h(r,"click",t[2]),p=!0)},p(t,[e]){if((!l||1&e)&&(n.checked=t[0]),26&e){let n;for(y=t[1],n=0;n<y.length;n+=1){const o=st(t,y,n);b[n]?(b[n].p(o,e),I(b[n],1)):(b[n]=lt(o),b[n].c(),I(b[n],1),b[n].m(s,null))}for(P(),n=y.length;n<b.length;n+=1)v(n);j()}},i(t){if(!l){for(let t=0;t<y.length;t+=1)I(b[t]);l=!0}},o(t){b=b.filter(Boolean);for(let t=0;t<b.length;t+=1)U(b[t]);l=!1},d(t){t&&a(e),d(b,t),p=!1,$()}}}function it(t,e,n){let o,r;const c=w("store"),{visibleTodos:s}=c.selectors;l(t,s,(t=>n(1,r=t)));const{areAllCompleted:u}=c.selectors;return l(t,u,(t=>n(0,o=t))),[o,r,()=>c.dispatch({type:X}),t=>{return c.dispatch((e=t.detail,{type:K,id:e}));var e},t=>{return c.dispatch((e=t.detail,{type:Q,values:e}));var e},s,u]}class at extends H{constructor(t){super(),z(this,t,it,ut,c,{})}}const dt=[];function ft(e,n=t){let o;const r=[];function s(t){if(c(e,t)&&(e=t,o)){const t=!dt.length;for(let t=0;t<r.length;t+=1){const n=r[t];n[1](),dt.push(n,e)}if(t){for(let t=0;t<dt.length;t+=2)dt[t][0](dt[t+1]);dt.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(c,l=t){const u=[c,l];return r.push(u),1===r.length&&(o=n(s)||t),c(e),()=>{const t=r.indexOf(u);-1!==t&&r.splice(t,1),0===r.length&&(o(),o=null)}}}}function pt(e,n,c){const l=!Array.isArray(e),u=l?[e]:e,i=n.length<2;return{subscribe:ft(c,(e=>{let c=!1;const a=[];let d=0,f=t;const p=()=>{if(d)return;f();const o=n(l?a[0]:a,e);i?e(o):f=r(o)?o:t},m=u.map(((t,e)=>s(t,(t=>{a[e]=t,d&=~(1<<e),c&&p()}),(()=>{d|=1<<e}))));return c=!0,p(),function(){o(m),f()}})).subscribe}}const mt="all",ht="active",gt="completed";function $t(t,e,n){const o=t.slice();return o[13]=e[n],o}function yt(t){let e,n,o,r,c,s,l=t[13].value+"";function d(){return t[11](t[13])}return{c(){e=f("li"),n=f("a"),o=p(l),r=m(),g(n,"href","./#"),y(n,"selected",t[13].key===t[2])},m(t,l){i(t,e,l),u(e,n),u(n,o),u(e,r),c||(s=h(n,"click",d),c=!0)},p(e,o){t=e,20&o&&y(n,"selected",t[13].key===t[2])},d(t){t&&a(e),c=!1,s()}}}function bt(e){let n,o,r;return{c(){n=f("button"),n.textContent="Clear completed",g(n,"class","clear-completed")},m(t,c){i(t,n,c),o||(r=h(n,"click",e[10]),o=!0)},p:t,d(t){t&&a(n),o=!1,r()}}}function vt(e){let n,o,r,c,s,l,h,y,b,v,k,E=e[4],w=[];for(let t=0;t<E.length;t+=1)w[t]=yt($t(e,E,t));let x=e[3]&&bt(e);return{c(){n=f("footer"),o=f("span"),r=f("strong"),c=p(e[0]),s=m(),l=f("span"),h=p(e[1]),y=p(" left"),b=m(),v=f("ul");for(let t=0;t<w.length;t+=1)w[t].c();k=m(),x&&x.c(),g(o,"class","todo-count"),g(v,"class","filters"),g(n,"class","footer")},m(t,e){i(t,n,e),u(n,o),u(o,r),u(r,c),u(o,s),u(o,l),u(l,h),u(l,y),u(n,b),u(n,v);for(let t=0;t<w.length;t+=1)w[t].m(v,null);u(n,k),x&&x.m(n,null)},p(t,[e]){if(1&e&&$(c,t[0]),2&e&&$(h,t[1]),532&e){let n;for(E=t[4],n=0;n<E.length;n+=1){const o=$t(t,E,n);w[n]?w[n].p(o,e):(w[n]=yt(o),w[n].c(),w[n].m(v,null))}for(;n<w.length;n+=1)w[n].d(1);w.length=E.length}t[3]?x?x.p(t,e):(x=bt(t),x.c(),x.m(n,null)):x&&(x.d(1),x=null)},i:t,o:t,d(t){t&&a(n),d(w,t),x&&x.d()}}}function kt(t,e,n){let o,r,c,s;const u=w("store"),i=[{key:mt,value:"All"},{key:ht,value:"Active"},{key:gt,value:"Completed"}],{filter:a}=u.state;l(t,a,(t=>n(2,c=t)));const{itemsLeft:d,completedCount:f}=u.selectors;l(t,d,(t=>n(0,o=t))),l(t,f,(t=>n(3,s=t)));const p=pt(d,(t=>1===t?"item":"items"));l(t,p,(t=>n(1,r=t)));const m=t=>u.dispatch((t=>({type:Z,filter:t}))(t));return[o,r,c,s,i,a,d,f,p,m,()=>u.dispatch({type:Y}),t=>m(t.key)]}class Et extends H{constructor(t){super(),z(this,t,kt,vt,c,{})}}function wt(e){let n;return{c(){n=f("footer"),n.innerHTML='<p data-testid="instruction">Double-click to edit a todo</p> \n  <p>Created by\n    <a href="http://github.com/blacksonic/">blacksonic</a></p> \n  <p>Part of\n    <a href="http://todomvc.com">TodoMVC</a></p>',g(n,"class","info")},m(t,e){i(t,n,e)},p:t,i:t,o:t,d(t){t&&a(n)}}}class xt extends H{constructor(t){super(),z(this,t,null,wt,c,{})}}const _t="todoapp_todos";class Ct{static loadTodos(){return JSON.parse(window.localStorage.getItem(_t)||"[]")}static storeTodos(t){window.localStorage.setItem(_t,JSON.stringify(t))}}var Tt,At=new Uint8Array(16);function Lt(){if(!Tt&&!(Tt="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Tt(At)}var Ot=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function St(t){return"string"==typeof t&&Ot.test(t)}for(var Rt=[],Vt=0;Vt<256;++Vt)Rt.push((Vt+256).toString(16).substr(1));function Dt(t,e,n){var o=(t=t||{}).random||(t.rng||Lt)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e){n=n||0;for(var r=0;r<16;++r)e[n+r]=o[r];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(Rt[t[e+0]]+Rt[t[e+1]]+Rt[t[e+2]]+Rt[t[e+3]]+"-"+Rt[t[e+4]]+Rt[t[e+5]]+"-"+Rt[t[e+6]]+Rt[t[e+7]]+"-"+Rt[t[e+8]]+Rt[t[e+9]]+"-"+Rt[t[e+10]]+Rt[t[e+11]]+Rt[t[e+12]]+Rt[t[e+13]]+Rt[t[e+14]]+Rt[t[e+15]]).toLowerCase();if(!St(n))throw TypeError("Stringified UUID is invalid");return n}(o)}function Mt(t){return t.filter((t=>t.completed))}function Nt(t){return t.filter((t=>!t.completed))}const Pt=t=>t.length&&Mt(t).length===t.length,jt=(t=[],e)=>{switch(e.type){case W:return[...e.todos];case G:return[...t,{id:Dt(),name:e.name,completed:!1}];case Q:return t.map((t=>t.id===e.values.id?{...t,...e.values}:t));case K:return t.filter((t=>t.id!==e.id));case X:return t.map((e=>({...e,completed:!Pt(t)})));case Y:return Nt(t);default:return t}},It=(t=mt,e)=>{switch(e.type){case Z:return e.filter;default:return t}};function Ut(t,e){const n=ft(e);return{state:n,subscribe:t=>n.subscribe(t),dispatch:e=>{n.update((n=>t(n,e)))}}}const qt=(t={todos:[],filter:mt})=>{const e=Ut(jt,t.todos),n=Ut(It,t.filter);return{state:{todos:e.state,filter:n.state},dispatch(t){e.dispatch(t),n.dispatch(t)},selectors:{itemsLeft:pt(e,(t=>Nt(t).length)),completedCount:pt(e,(t=>Mt(t).length)),visibleTodos:pt([e,n],(([t,e])=>function(t,e){switch(e){case mt:return[...t];case gt:return Mt(t);case ht:return Nt(t);default:return[...t]}}(t,e))),areAllCompleted:pt(e,(t=>t.length&&t.every((t=>t.completed))))}}};function Bt(t){let e,n;return e=new at({}),{c(){q(e.$$.fragment)},m(t,o){B(e,t,o),n=!0},i(t){n||(I(e.$$.fragment,t),n=!0)},o(t){U(e.$$.fragment,t),n=!1},d(t){F(e,t)}}}function Ft(t){let e,n;return e=new Et({}),{c(){q(e.$$.fragment)},m(t,o){B(e,t,o),n=!0},i(t){n||(I(e.$$.fragment,t),n=!0)},o(t){U(e.$$.fragment,t),n=!1},d(t){F(e,t)}}}function Jt(t){let e,n,o,r,c,s,l,d;o=new nt({});let p=t[0].length&&Bt(),h=t[0].length&&Ft();return l=new xt({}),{c(){e=f("div"),n=f("section"),q(o.$$.fragment),r=m(),p&&p.c(),c=m(),h&&h.c(),s=m(),q(l.$$.fragment),g(n,"class","todoapp"),g(e,"id","app")},m(t,a){i(t,e,a),u(e,n),B(o,n,null),u(n,r),p&&p.m(n,null),u(n,c),h&&h.m(n,null),u(e,s),B(l,e,null),d=!0},p(t,[e]){t[0].length?p?1&e&&I(p,1):(p=Bt(),p.c(),I(p,1),p.m(n,c)):p&&(P(),U(p,1,1,(()=>{p=null})),j()),t[0].length?h?1&e&&I(h,1):(h=Ft(),h.c(),I(h,1),h.m(n,null)):h&&(P(),U(h,1,1,(()=>{h=null})),j())},i(t){d||(I(o.$$.fragment,t),I(p),I(h),I(l.$$.fragment,t),d=!0)},o(t){U(o.$$.fragment,t),U(p),U(h),U(l.$$.fragment,t),d=!1},d(t){t&&a(e),F(o),p&&p.d(),h&&h.d(),F(l)}}}function zt(t,e,n){let o;const r=qt();var c,s;c="store",s=r,k().$$.context.set(c,s);const{todos:u}=r.state;var i;return l(t,u,(t=>n(0,o=t))),i=()=>{r.dispatch((t=>({type:W,todos:t}))(Ct.loadTodos())),u.subscribe((t=>Ct.storeTodos(t)))},k().$$.on_mount.push(i),[o,u]}return new class extends H{constructor(t){super(),z(this,t,zt,Jt,c,{})}}({target:document.querySelector("app-root")})}();
//# sourceMappingURL=bundle.js.map
