var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function l(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}function s(t,e,n){t.$$.on_destroy.push(l(e,n))}function u(t,e){t.appendChild(e)}function i(t,e,n){t.insertBefore(e,n||null)}function a(t){t.parentNode.removeChild(t)}function d(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function f(t){return document.createElement(t)}function p(t){return document.createTextNode(t)}function m(){return p(" ")}function h(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function g(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function $(t,e){e=""+e,t.data!==e&&(t.data=e)}function y(t,e,n){t.classList[n?"add":"remove"](e)}let b;function v(t){b=t}function E(){if(!b)throw new Error("Function called outside component initialization");return b}function k(){const t=E();return(e,n)=>{const o=t.$$.callbacks[e];if(o){const r=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);o.slice().forEach(e=>{e.call(t,r)})}}}function w(t){return E().$$.context.get(t)}const x=[],C=[],_=[],A=[],T=Promise.resolve();let L=!1;function O(t){_.push(t)}let S=!1;const R=new Set;function V(){if(!S){S=!0;do{for(let t=0;t<x.length;t+=1){const e=x[t];v(e),M(e.$$)}for(x.length=0;C.length;)C.pop()();for(let t=0;t<_.length;t+=1){const e=_[t];R.has(e)||(R.add(e),e())}_.length=0}while(x.length);for(;A.length;)A.pop()();L=!1,S=!1,R.clear()}}function M(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(O)}}const D=new Set;let N;function P(){N={r:0,c:[],p:N}}function j(){N.r||o(N.c),N=N.p}function I(t,e){t&&t.i&&(D.delete(t),t.i(e))}function U(t,e,n,o){if(t&&t.o){if(D.has(t))return;D.add(t),N.c.push(()=>{D.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}}function q(t){t&&t.c()}function B(t,n,c){const{fragment:l,on_mount:s,on_destroy:u,after_update:i}=t.$$;l&&l.m(n,c),O(()=>{const n=s.map(e).filter(r);u?u.push(...n):o(n),t.$$.on_mount=[]}),i.forEach(O)}function F(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function J(t,e){-1===t.$$.dirty[0]&&(x.push(t),L||(L=!0,T.then(V)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function z(e,r,c,l,s,u,i=[-1]){const d=b;v(e);const f=r.props||{},p=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:s,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:n(),dirty:i};let m=!1;if(p.ctx=c?c(e,f,(t,n,...o)=>{const r=o.length?o[0]:n;return p.ctx&&s(p.ctx[t],p.ctx[t]=r)&&(p.bound[t]&&p.bound[t](r),m&&J(e,t)),n}):[],p.update(),m=!0,o(p.before_update),p.fragment=!!l&&l(p.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);p.fragment&&p.fragment.l(t),t.forEach(a)}else p.fragment&&p.fragment.c();r.intro&&I(e.$$.fragment),B(e,r.target,r.anchor),V()}v(d)}class H{$destroy(){F(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}const W="LOAD",G="CREATE",K="REMOVE",Q="UPDATE_TODO",X="COMPLETE_ALL",Y="CLEAR_COMPLETED",Z="SELECT_FILTER";function tt(e){let n,r,c,l,s,d;return{c(){n=f("header"),r=f("h1"),r.textContent="todos",c=m(),l=f("input"),g(l,"class","new-todo"),g(l,"placeholder","What needs to be done?"),l.value=e[0],g(l,"data-testid","todo-create"),g(n,"class","header")},m(t,o){i(t,n,o),u(n,r),u(n,c),u(n,l),s||(d=[h(l,"input",e[1]),h(l,"keyup",e[2])],s=!0)},p(t,[e]){1&e&&l.value!==t[0]&&(l.value=t[0])},i:t,o:t,d(t){t&&a(n),s=!1,o(d)}}}function et(t,e,n){const o=w("store");let r="";return[r,t=>n(0,r=t.target.value),t=>{"Enter"===t.key&&(o.dispatch((t=>({type:G,name:t}))(r)),n(0,r=""))}]}class nt extends H{constructor(t){super(),z(this,t,et,tt,c,{})}}function ot(e){let n,r,c,l,s,d,b,v,E,k,w,x,C,_=e[0].name+"";return{c(){n=f("li"),r=f("div"),c=f("input"),s=m(),d=f("label"),b=p(_),v=m(),E=f("button"),k=m(),w=f("input"),g(c,"class","toggle"),g(c,"type","checkbox"),c.checked=l=e[0].completed,g(d,"data-testid","todo-name"),g(E,"class","destroy"),g(E,"data-testid","todo-remove"),g(r,"class","view"),g(w,"class","edit"),w.value=e[2],g(n,"data-testid","todo-item"),y(n,"editing",e[1]),y(n,"completed",e[0].completed)},m(t,o){i(t,n,o),u(n,r),u(r,c),u(r,s),u(r,d),u(d,b),u(r,v),u(r,E),u(n,k),u(n,w),x||(C=[h(c,"change",e[4]),h(d,"dblclick",e[3]),h(E,"click",e[5]),h(w,"input",e[6]),h(w,"blur",e[7])],x=!0)},p(t,[e]){1&e&&l!==(l=t[0].completed)&&(c.checked=l),1&e&&_!==(_=t[0].name+"")&&$(b,_),4&e&&w.value!==t[2]&&(w.value=t[2]),2&e&&y(n,"editing",t[1]),1&e&&y(n,"completed",t[0].completed)},i:t,o:t,d(t){t&&a(n),x=!1,o(C)}}}function rt(t,e,n){const o=k();let{todo:r}=e,c=!1,{name:l}=r;return t.$set=t=>{"todo"in t&&n(0,r=t.todo)},[r,c,l,()=>n(1,c=!0),()=>{o("update",{id:r.id,completed:!r.completed})},()=>o("remove",r.id),t=>n(2,l=t.target.value),()=>{o("update",{id:r.id,name:l}),n(1,c=!1)}]}class ct extends H{constructor(t){super(),z(this,t,rt,ot,c,{todo:0})}}function lt(t,e,n){const o=t.slice();return o[8]=e[n],o}function st(t){let e;const n=new ct({props:{todo:t[8]}});return n.$on("remove",t[3]),n.$on("update",t[4]),{c(){q(n.$$.fragment)},m(t,o){B(n,t,o),e=!0},p(t,e){const o={};2&e&&(o.todo=t[8]),n.$set(o)},i(t){e||(I(n.$$.fragment,t),e=!0)},o(t){U(n.$$.fragment,t),e=!1},d(t){F(n,t)}}}function ut(t){let e,n,o,r,c,l,s,p,$,y=t[1],b=[];for(let e=0;e<y.length;e+=1)b[e]=st(lt(t,y,e));const v=t=>U(b[t],1,1,()=>{b[t]=null});return{c(){e=f("section"),n=f("input"),o=m(),r=f("label"),c=m(),l=f("ul");for(let t=0;t<b.length;t+=1)b[t].c();g(n,"id","toggle-all"),g(n,"class","toggle-all"),g(n,"type","checkbox"),n.checked=t[0],n.readOnly=!0,g(r,"for","toggle-all"),g(l,"class","todo-list"),g(e,"class","main")},m(a,d){i(a,e,d),u(e,n),u(e,o),u(e,r),u(e,c),u(e,l);for(let t=0;t<b.length;t+=1)b[t].m(l,null);s=!0,p||($=h(r,"click",t[2]),p=!0)},p(t,[e]){if((!s||1&e)&&(n.checked=t[0]),26&e){let n;for(y=t[1],n=0;n<y.length;n+=1){const o=lt(t,y,n);b[n]?(b[n].p(o,e),I(b[n],1)):(b[n]=st(o),b[n].c(),I(b[n],1),b[n].m(l,null))}for(P(),n=y.length;n<b.length;n+=1)v(n);j()}},i(t){if(!s){for(let t=0;t<y.length;t+=1)I(b[t]);s=!0}},o(t){b=b.filter(Boolean);for(let t=0;t<b.length;t+=1)U(b[t]);s=!1},d(t){t&&a(e),d(b,t),p=!1,$()}}}function it(t,e,n){let o,r;const c=w("store"),{visibleTodos:l}=c.selectors;s(t,l,t=>n(1,r=t));const{areAllCompleted:u}=c.selectors;return s(t,u,t=>n(0,o=t)),[o,r,()=>c.dispatch({type:X}),t=>{return c.dispatch((e=t.detail,{type:K,id:e}));var e},t=>{return c.dispatch((e=t.detail,{type:Q,values:e}));var e},l,u]}class at extends H{constructor(t){super(),z(this,t,it,ut,c,{})}}const dt=[];function ft(e,n=t){let o;const r=[];function l(t){if(c(e,t)&&(e=t,o)){const t=!dt.length;for(let t=0;t<r.length;t+=1){const n=r[t];n[1](),dt.push(n,e)}if(t){for(let t=0;t<dt.length;t+=2)dt[t][0](dt[t+1]);dt.length=0}}}return{set:l,update:function(t){l(t(e))},subscribe:function(c,s=t){const u=[c,s];return r.push(u),1===r.length&&(o=n(l)||t),c(e),()=>{const t=r.indexOf(u);-1!==t&&r.splice(t,1),0===r.length&&(o(),o=null)}}}}function pt(e,n,c){const s=!Array.isArray(e),u=s?[e]:e,i=n.length<2;return{subscribe:ft(c,e=>{let c=!1;const a=[];let d=0,f=t;const p=()=>{if(d)return;f();const o=n(s?a[0]:a,e);i?e(o):f=r(o)?o:t},m=u.map((t,e)=>l(t,t=>{a[e]=t,d&=~(1<<e),c&&p()},()=>{d|=1<<e}));return c=!0,p(),function(){o(m),f()}}).subscribe}}const mt="all",ht="active",gt="completed";function $t(t,e,n){const o=t.slice();return o[13]=e[n],o}function yt(t){let e,n,o,r,c,l,s=t[13].value+"";function d(...e){return t[11](t[13],...e)}return{c(){e=f("li"),n=f("a"),o=p(s),r=m(),g(n,"href","./#"),y(n,"selected",t[13].key===t[2])},m(t,s){i(t,e,s),u(e,n),u(n,o),u(e,r),c||(l=h(n,"click",d),c=!0)},p(e,o){t=e,20&o&&y(n,"selected",t[13].key===t[2])},d(t){t&&a(e),c=!1,l()}}}function bt(e){let n,o,r;return{c(){n=f("button"),n.textContent="Clear completed",g(n,"class","clear-completed")},m(t,c){i(t,n,c),o||(r=h(n,"click",e[10]),o=!0)},p:t,d(t){t&&a(n),o=!1,r()}}}function vt(e){let n,o,r,c,l,s,h,y,b,v,E,k=e[4],w=[];for(let t=0;t<k.length;t+=1)w[t]=yt($t(e,k,t));let x=e[3]&&bt(e);return{c(){n=f("footer"),o=f("span"),r=f("strong"),c=p(e[0]),l=m(),s=f("span"),h=p(e[1]),y=p(" left"),b=m(),v=f("ul");for(let t=0;t<w.length;t+=1)w[t].c();E=m(),x&&x.c(),g(o,"class","todo-count"),g(v,"class","filters"),g(n,"class","footer")},m(t,e){i(t,n,e),u(n,o),u(o,r),u(r,c),u(o,l),u(o,s),u(s,h),u(s,y),u(n,b),u(n,v);for(let t=0;t<w.length;t+=1)w[t].m(v,null);u(n,E),x&&x.m(n,null)},p(t,[e]){if(1&e&&$(c,t[0]),2&e&&$(h,t[1]),532&e){let n;for(k=t[4],n=0;n<k.length;n+=1){const o=$t(t,k,n);w[n]?w[n].p(o,e):(w[n]=yt(o),w[n].c(),w[n].m(v,null))}for(;n<w.length;n+=1)w[n].d(1);w.length=k.length}t[3]?x?x.p(t,e):(x=bt(t),x.c(),x.m(n,null)):x&&(x.d(1),x=null)},i:t,o:t,d(t){t&&a(n),d(w,t),x&&x.d()}}}function Et(t,e,n){let o,r,c,l;const u=w("store"),i=[{key:mt,value:"All"},{key:ht,value:"Active"},{key:gt,value:"Completed"}],{filter:a}=u.state;s(t,a,t=>n(2,c=t));const{itemsLeft:d,completedCount:f}=u.selectors;s(t,d,t=>n(0,o=t)),s(t,f,t=>n(3,l=t));const p=pt(d,t=>1===t?"item":"items");s(t,p,t=>n(1,r=t));const m=t=>u.dispatch((t=>({type:Z,filter:t}))(t));return[o,r,c,l,i,a,d,f,p,m,()=>u.dispatch({type:Y}),t=>m(t.key)]}class kt extends H{constructor(t){super(),z(this,t,Et,vt,c,{})}}function wt(e){let n;return{c(){n=f("footer"),n.innerHTML='<p data-testid="instruction">Double-click to edit a todo</p> \n  <p>\n    Created by\n    <a href="http://github.com/blacksonic/">blacksonic</a></p> \n  <p>\n    Part of\n    <a href="http://todomvc.com">TodoMVC</a></p>',g(n,"class","info")},m(t,e){i(t,n,e)},p:t,i:t,o:t,d(t){t&&a(n)}}}class xt extends H{constructor(t){super(),z(this,t,null,wt,c,{})}}class Ct{static loadTodos(){return JSON.parse(window.localStorage.getItem("todoapp_todos")||"[]")}static storeTodos(t){window.localStorage.setItem("todoapp_todos",JSON.stringify(t))}}var _t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),At=new Uint8Array(16);function Tt(){if(!_t)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return _t(At)}for(var Lt=[],Ot=0;Ot<256;++Ot)Lt.push((Ot+256).toString(16).substr(1));function St(t,e,n){"string"==typeof t&&(e="binary"===t?new Uint8Array(16):null,t=null);var o=(t=t||{}).random||(t.rng||Tt)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e){for(var r=n||0,c=0;c<16;++c)e[r+c]=o[c];return e}return function(t,e){var n=e||0,o=Lt;return(o[t[n+0]]+o[t[n+1]]+o[t[n+2]]+o[t[n+3]]+"-"+o[t[n+4]]+o[t[n+5]]+"-"+o[t[n+6]]+o[t[n+7]]+"-"+o[t[n+8]]+o[t[n+9]]+"-"+o[t[n+10]]+o[t[n+11]]+o[t[n+12]]+o[t[n+13]]+o[t[n+14]]+o[t[n+15]]).toLowerCase()}(o)}function Rt(t){return t.filter(t=>t.completed)}function Vt(t){return t.filter(t=>!t.completed)}const Mt=t=>t.length&&Rt(t).length===t.length,Dt=(t=[],e)=>{switch(e.type){case W:return[...e.todos];case G:return[...t,{id:St(),name:e.name,completed:!1}];case Q:return t.map(t=>t.id===e.values.id?{...t,...e.values}:t);case K:return t.filter(t=>t.id!==e.id);case X:return t.map(e=>({...e,completed:!Mt(t)}));case Y:return Vt(t);default:return t}},Nt=(t=mt,e)=>{switch(e.type){case Z:return e.filter;default:return t}};function Pt(t,e){const n=ft(e);return{state:n,subscribe:t=>n.subscribe(t),dispatch:e=>{n.update(n=>t(n,e))}}}const jt=(t={todos:[],filter:mt})=>{const e=Pt(Dt,t.todos),n=Pt(Nt,t.filter);return{state:{todos:e.state,filter:n.state},dispatch(t){e.dispatch(t),n.dispatch(t)},selectors:{itemsLeft:pt(e,t=>Vt(t).length),completedCount:pt(e,t=>Rt(t).length),visibleTodos:pt([e,n],([t,e])=>function(t,e){switch(e){case mt:return[...t];case gt:return Rt(t);case ht:return Vt(t);default:return[...t]}}(t,e)),areAllCompleted:pt(e,t=>t.length&&t.every(t=>t.completed))}}};function It(t){let e;const n=new at({});return{c(){q(n.$$.fragment)},m(t,o){B(n,t,o),e=!0},i(t){e||(I(n.$$.fragment,t),e=!0)},o(t){U(n.$$.fragment,t),e=!1},d(t){F(n,t)}}}function Ut(t){let e;const n=new kt({});return{c(){q(n.$$.fragment)},m(t,o){B(n,t,o),e=!0},i(t){e||(I(n.$$.fragment,t),e=!0)},o(t){U(n.$$.fragment,t),e=!1},d(t){F(n,t)}}}function qt(t){let e,n,o,r,c,l;const s=new nt({});let d=t[0].length&&It(),p=t[0].length&&Ut();const h=new xt({});return{c(){e=f("div"),n=f("section"),q(s.$$.fragment),o=m(),d&&d.c(),r=m(),p&&p.c(),c=m(),q(h.$$.fragment),g(n,"class","todoapp"),g(e,"id","app")},m(t,a){i(t,e,a),u(e,n),B(s,n,null),u(n,o),d&&d.m(n,null),u(n,r),p&&p.m(n,null),u(e,c),B(h,e,null),l=!0},p(t,[e]){t[0].length?d?1&e&&I(d,1):(d=It(),d.c(),I(d,1),d.m(n,r)):d&&(P(),U(d,1,1,()=>{d=null}),j()),t[0].length?p?1&e&&I(p,1):(p=Ut(),p.c(),I(p,1),p.m(n,null)):p&&(P(),U(p,1,1,()=>{p=null}),j())},i(t){l||(I(s.$$.fragment,t),I(d),I(p),I(h.$$.fragment,t),l=!0)},o(t){U(s.$$.fragment,t),U(d),U(p),U(h.$$.fragment,t),l=!1},d(t){t&&a(e),F(s),d&&d.d(),p&&p.d(),F(h)}}}function Bt(t,e,n){let o;const r=jt();var c,l;c="store",l=r,E().$$.context.set(c,l);const{todos:u}=r.state;var i;return s(t,u,t=>n(0,o=t)),i=()=>{r.dispatch((t=>({type:W,todos:t}))(Ct.loadTodos())),u.subscribe(t=>Ct.storeTodos(t))},E().$$.on_mount.push(i),[o,u]}return new class extends H{constructor(t){super(),z(this,t,Bt,qt,c,{})}}({target:document.querySelector("app-root")})}();
//# sourceMappingURL=bundle.js.map
